<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Friend Finder - Survey</title>
	<!-- Bootstrap and Jquery -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  	<script src="https://code.jquery.com/jquery.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>
<body>
	<div class="container">
		<!-- Questions -->
		<h1>Survey Questions</h1>
		<hr>
		<h3><strong>About You</strong></h3>
		<form>
			<div class="form-group">
				<label for="usr">Name (Required):</label>
				<input type="text" class="form-control" id="usr" required >
			</div>
			<div class="form-group">
				<label for="img">Link to Photo Image (Required):</label>
				<input type="text" class="form-control" id="img" required >
			</div>
			<hr>
			<h2><strong>Question 1</strong></h2>
			<h3>You love to watch movies.</h3>
				<select data-placeholder="" class="custom-select" id="q1">
				<option selected>Select an option</option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
			<br>
			<h2><strong>Question 2</strong></h2>
			<h3>You'd rather tell the truth than lie.</h3>
				<select data-placeholder="" class="custom-select" id="q2">
				<option selected>Select an option</option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
			<br>
			<h2><strong>Question 3</strong></h2>
			<h3>You have a "get things done" mentality.</h3>
				<select data-placeholder="" class="custom-select" id="q3">
				<option selected>Select an option</option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
			<br>
			<h2><strong>Question 4</strong></h2>
			<h3>You have a positive attitude in general.</h3>
				<select data-placeholder="" class="custom-select" id="q4">
				<option selected>Select an option</option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
			<br>
			<h2><strong>Question 5</strong></h2>
			<h3>You are very social.</h3>
				<select data-placeholder="" class="custom-select" id="q5">
				<option selected>Select an option</option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
			<br>
			<h2><strong>Question 6</strong></h2>
			<h3>You are a party animal.</h3>
				<select data-placeholder="" class="custom-select" id="q6">
				<option selected>Select an option</option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
			<br>
			<h2><strong>Question 7</strong></h2>
			<h3>You like to drink cocktails.</h3>
				<select data-placeholder="" class="custom-select" id="q7">
				<option selected>Select an option</option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
			<br>
			<h2><strong>Question 8</strong></h2>
			<h3>You like to travel.</h3>
				<select data-placeholder="" class="custom-select" id="q8">
				<option selected>Select an option</option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
			<br>
			<h2><strong>Question 9</strong></h2>
			<h3>Social media is very important to you.</h3>
				<select data-placeholder="" class="custom-select" id="q9">
				<option selected>Select an option</option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
			<br>
			<h2><strong>Question 10</strong></h2>
			<h3>Online dating is ridiculous to you.</h3>
				<select data-placeholder="" class="custom-select" id="q10">
				<option selected>Select an option</option>
				<option value="1">1 (Strongly Disagree)</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 (Strongly Agree)</option>
			</select>
			<br>
			<br>
			<!-- Submit button -->
			<button type="button" class="btn btn-primary btn-lg btn-block" id="submit-btn">Submit</button>
		</form>
		<hr>
		<!-- Modal -->
		<div id="friendModal" class="modal fade" role="dialog">
    		<div class="modal-dialog">
        	<div class="modal-content">
            	<div class="modal-header">
                	<button type="button" class="close" data-dismiss="modal">&times;</button>
                	<h4 class="modal-title">Meet Your New Best Friend!</h4>
            	</div>
            	<div class="modal-body">
                	<h5 id="bestFriendName"></h5>
                	<img id="bestFriendPicture" src="" alt="No Image">
            	</div>
            	<div class="modal-footer">
                	<button type="button" class="btn btn-primary btn-lg btn-block" data-dismiss="modal">Close</button>
            	</div>
        	</div>
    		</div>
  		</div>
		
		<!-- Footer -->
		<footer class="footer">
			<div class="container">
				<p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/StuKushner/FriendFinder">GitHub Repo</a></p>
			</div>
		</footer>
	</div>

<script type="text/javascript">
	$(document).ready(function(){
		// When person clicks the submit button, it will check to see if all forms are filled in.
		// If they aren't, the submission won't go through.
		$("#submit-btn").on("click", function(){
			function formValidate() {
				var isValid = true;
				$(".form-control").each(function(){
					if ($(this).val() === '') {
						isValid = false;
					}
				});

				$(".custom-select").each(function(){
					if ($(this).val() === "") {
						isValid = false;
					}
				});
				return isValid;
			}
			// If they are, create a new object for the user depending on results
			if (formValidate() == true) {
				var newFriend = {
					name: $("#usr").val().trim(),
					photo: $("#img").val().trim(),
					scores: [
						$("#q1").val(),
						$("#q2").val(),
						$("#q3").val(),
						$("#q4").val(),
						$("#q5").val(),
						$("#q6").val(),
						$("#q7").val(),
						$("#q8").val(),
						$("#q9").val(),
						$("#q10").val(),
					]
				};

				var url = window.location.origin;
				//Ajax post to the friend's UI
				$.post(url + "/api/friends", newFriend, function(data){
					// Grab from the Ajax the best match's name and photo
					$("#bestFriendName").text(data.name);
					$("#bestFriendPicture").attr("src", data.photo);
				});
				// Trigger the modal displaying the above Ajax result
				$("#friendModal").modal();

				// Clear all data fields
				$("#usr").val("");
				$("#img").val("");		
				$("#q1").val("");
				$("#q2").val("");
				$("#q3").val("");
				$("#q4").val("");
				$("#q5").val("");
				$("#q6").val("");
				$("#q7").val("");
				$("#q8").val("");
				$("#q9").val("");
				$("#q10").val("");
			} else {
				alert("Please fill in all forms before submitting!");
			}
		});
	});
	</script>
</body>
</html>